<!DOCTYPE html>
<html lang="en">





<head>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <meta property="og:title" content="k8s lab 02" />
<meta property="og:description" content="So, got a few use cases that I want to try:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://4cm3.dev/post/k8s-lab-02/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-08T08:45:46-05:00" /><meta property="og:site_name" content="Luis Uribe - blog" />

  <meta itemprop="name" content="k8s lab 02">
<meta itemprop="description" content="So, got a few use cases that I want to try:"><meta itemprop="datePublished" content="2021-10-27T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-02-08T08:45:46-05:00" />
<meta itemprop="wordCount" content="121">
<meta itemprop="keywords" content="" />
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="k8s lab 02"/>
<meta name="twitter:description" content="So, got a few use cases that I want to try:"/>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
    k8s lab 02
    
  </title>
  <link rel="stylesheet" href='https://4cm3.dev/css/site.min.css'>
  <link rel="canonical" href="https://4cm3.dev/post/k8s-lab-02/">
  <link rel="alternate" type="application/rss&#43;xml" href="https://4cm3.dev/index.xml" title="luisuribe">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="author" content="Luis Uribe">
  <meta name="description" content="So, got a few use cases that I want to try:">
</head>
<body><nav class="navbar is-transparent " role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="https://4cm3.dev/">
      <figure class="image">
        <img alt="" class="is-rounded" src="https://www.gravatar.com/avatar/cd3838fa3b53b8d704cf08209f4a62e1?s=128&d=identicon">
      </figure>
    </a>
    <a class="navbar-item" href="https://4cm3.dev/">
      luisuribe
    </a>
  </div>

  <div class="navbar-menu">
    <div class="navbar-start">
      
    </div>

    <div class="navbar-end">
      <a class="navbar-item" href="/" rel="noopener" target="_blank">
        blog
      </a>
      <a class="navbar-item" href="/labs" rel="noopener" target="_blank">
        labs
      </a>
      <a class="navbar-item" href="/about" rel="noopener" target="_blank">
        about
      </a>

      
      <a class="navbar-item" href="https://github.com/luisuribe/" rel="noopener" target="_blank">
        <span class="icon">
          
            <img alt="icons/svg/github.svg" src='https://4cm3.dev/icons/svg/github.svg'>
          
        </span>
      </a>
      
      <a class="navbar-item" href="https://gitlab.com/luisuribe/" rel="noopener" target="_blank">
        <span class="icon">
          
            <img alt="icons/svg/gitlab.svg" src='https://4cm3.dev/icons/svg/gitlab.svg'>
          
        </span>
      </a>
      
      <a class="navbar-item" href="https://www.linkedin.com/in/luribe/" rel="noopener" target="_blank">
        <span class="icon">
          
            <img alt="icons/svg/linkedin.svg" src='https://4cm3.dev/icons/svg/linkedin.svg'>
          
        </span>
      </a>
      
      <a class="navbar-item" href="https://4cm3.dev/index.xml" target="_blank">
        <span class="icon">
          <img alt="rss" src='https://4cm3.dev/icons/svg/rss.svg'>
        </span>
      </a>
      
    </div>
  </div>
</nav>

  <section>
    <section class='hero is-small is-info is-fullwidth'>
      <div class="hero-body">
<div class="container">
  <h1 class="title">
    k8s lab 02
  </h1>
  <h2 class="subtitle">
    <time datetime='2021-10-27T00:00:00Z'>
      October 27, 2021
    </time>
    
  </h2>
</div>

      </div>
    </section>
    <section class="section">
      <div class="container">
<div class="content is-medium">
  <p>So, got a few use cases that I want to try:</p>
<ul>
<li>Configure aliases and handy stuff (autocomplete) for the terminal</li>
<li>Deploy a new container</li>
<li>more later &hellip;</li>
</ul>
<h3 id="configure-aliases-and-handy-stuff-autocomplete-for-the-terminal">Configure aliases and handy stuff (autocomplete) for the terminal</h3>
<p>Add this lines to <code>~/.bash_profile</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>alias k<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;minikube kubectl --&#34;</span>
</span></span><span style="display:flex;"><span>set_minikube <span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  eval <span style="color:#66d9ef">$(</span>minikube -p minikube docker-env<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>source &lt;<span style="color:#f92672">(</span>k completion bash<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>complete -F __start_kubectl k
</span></span></code></pre></div><p>I have a simple Makefile for builds and deploys:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Makefile" data-lang="Makefile"><span style="display:flex;"><span><span style="color:#a6e22e">kdeploy</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  minikube kubectl -- apply -f hello.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kdelete</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  minikube kubectl -- delete -f hello.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">kservice</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  minikube kubectl -- expose deployment k8s-lab-deployment --type<span style="color:#f92672">=</span>LoadBalancer --port<span style="color:#f92672">=</span><span style="color:#ae81ff">5000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">release</span><span style="color:#f92672">:</span> build
</span></span><span style="display:flex;"><span>  docker tag k8s-lab k8s-lab:<span style="color:#66d9ef">$(</span>version<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># something to </span>
</span></span><span style="display:flex;"><span>  yq e -i <span style="color:#e6db74">&#39;.spec.template.spec.containers[0].image = &#34;k8s-lab:$(version)&#34;&#39;</span> hello.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">deploy</span><span style="color:#f92672">:</span> release kdeploy
</span></span></code></pre></div><p>So i can deploy with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make release version<span style="color:#f92672">=</span>X
</span></span></code></pre></div>
</div>


      </div>
    </section>
  </section><footer class="footer">


  <div class="content has-text-centered">
    <p>
      Last modified Jun 26, 2023 | template based on <a href="https://github.com/orf/bare-hugo-theme" target="_blank">Bare Hugo theme.</a>
    </p>

  </div>
</footer></body>
</html>
